{"version":3,"file":"static/js/116.1231f7b0.chunk.js","mappings":"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","sources":["components/ServedFrom.tsx","components/Version.tsx","components/DeployInfo.tsx","utils/export.ts","hooks/useWorkSessions.ts","components/WorkSessionItem.tsx","components/WorkSessions.tsx","components/EndWorkSessionButton.tsx","pages/BoardSummaryPage.tsx","../node_modules/file-saver/src/FileSaver.js"],"sourcesContent":["import React from \"react\";\r\n\r\nexport function ServedFrom() {\r\n    return (\r\n        <>\r\n            Served from: {window.location.host}\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\n\r\nexport function Version() {\r\n    return (\r\n        <>\r\n            Version: {process.env.REACT_APP_VERSION}\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\n\r\nimport \"./DeployInfo.scss\";\r\nimport { ServedFrom } from \"./ServedFrom\";\r\nimport { Version } from \"./Version\";\r\n\r\ntype Props = {\r\n    className?: string;\r\n}\r\n\r\nexport function DeployInfo(props: Props) {\r\n    return (\r\n        <div className={props.className}>\r\n            <span className=\"deploy-text\">\r\n                <Version />\r\n            </span>\r\n            <span className=\"deploy-text\">\r\n                <ServedFrom />\r\n            </span>\r\n        </div>\r\n    );\r\n}\r\n","import { getAllCardsEstimates } from \"../api/estimateApi\";\nimport { Trello } from \"../types/trello\";\n\nfunction roundTo2Decimals(number: number) {\n    return Math.round(number * 100)/100;\n}\n\nexport async function exportEstimatesToTsv(t: Trello.PowerUp.IFrame, marginPercentage: number) {\n    const estimates = await getAllCardsEstimates(t, \"id\", \"name\");\n    const filtered = estimates.filter(e => e.estimateMinutes > 0);\n\n    const rows = [\"Task\\tHours\"];\n\n    for (const estimate of filtered)\n        rows.push(`${estimate.card.name}\\t${roundTo2Decimals(estimate.estimateMinutes/60)}`);\n\n    let totalEstimateHours = 0;\n\n    for (const estimate of filtered)\n        totalEstimateHours += estimate.estimateMinutes/60;\n\n    if (marginPercentage > 0) {\n        const margin = roundTo2Decimals(totalEstimateHours * marginPercentage);\n        rows.push(`margin\\t${margin}`);\n        totalEstimateHours += margin;\n    }\n\n    totalEstimateHours = roundTo2Decimals(totalEstimateHours);\n\n    rows.push(`total\\t${totalEstimateHours}`);\n\n    return rows.join(\"\\n\");\n}\n","import { useQuery, useQueryClient } from \"react-query\";\n\nimport { getWorkSessions } from \"../api/estimateApi\";\nimport { Trello } from \"../types/trello\";\nimport { useTrelloRenderWithOptions } from \"./useTrelloRender\";\n\nconst queryKey = \"work_sessions\";\n\nexport function useWorkSessionsQuery(t: Trello.PowerUp.IFrame) {\n    return useQuery(\n        queryKey,\n        () => getWorkSessions(t),\n        {\n            staleTime: 5 * 1000,\n        },\n    );\n}\n\nexport function useWorkSessions(t: Trello.PowerUp.IFrame) {\n    const queryClient = useQueryClient();\n    const query = useWorkSessionsQuery(t);\n\n    useTrelloRenderWithOptions(t, {\n        refresh: () => queryClient.setQueryData(queryKey, undefined),\n        callImmediately: false,\n    });\n\n    return query;\n}\n","import React from \"react\";\n\nimport { WorkSession } from \"../api/estimateApi\";\nimport { useCurrentWork } from \"../hooks/useCurrentWork\";\nimport { useElapsedMinutes } from \"../hooks/useElapsed\";\nimport { formatMinutes } from \"../utils/timeParsing\";\n\ntype Props = {\n    className?: string;\n    session: WorkSession;\n}\n\nexport function WorkSessionItem(props: Props) {\n    const session = props.session;\n    const isoStartDate = session.startDate.toISOString();\n    const formattedDate = isoStartDate.substring(0, isoStartDate.indexOf(\"T\"));\n\n    const currentWork = useCurrentWork();\n    const currentWorkMinutes = useElapsedMinutes(\n        session.endDate === undefined\n            ? currentWork.value?.startDate\n            : undefined,\n    );\n\n    const totalWorkMinutes = session.workMinutes + currentWorkMinutes;\n\n    // TODO: scrivere se è chiusa\n\n    return (\n        <div className={`work-session ${props.className}`}>\n            Start: {formattedDate}\n            {\" | \"}\n            Work: {formatMinutes(totalWorkMinutes)}\n        </div>\n    );\n}\n","import React, { useState } from \"react\";\n\nimport { useProvidedTrello } from \"../hooks/useProvidedTrello\";\nimport { useWorkSessions } from \"../hooks/useWorkSessions\";\nimport { WorkSessionItem } from \"./WorkSessionItem\";\n\ntype Props = {\n    className?: string;\n}\n\nexport function WorkSessions(props: Props) {\n    const t = useProvidedTrello();\n    const workSessions = useWorkSessions(t);\n    const [showAll, setShowAll] = useState(false);\n\n    const length = workSessions.data?.length ?? 0;\n\n    return (\n        <div className={`work-sessions ${props.className}`}>\n            {length > 0\n                && <p>\n                    Work sessions:\n                    {\"   \"}\n                    {length > 1\n                        && <span\n                            className='link-like'\n                            onClick={() => setShowAll(current => !current)}\n                        >\n                            {!showAll ? \"show all\" : \"hide older\"}\n                        </span>\n                    }\n                </p>\n            }\n            <div className='work-sessions-list'>\n                {workSessions.data === undefined\n                    ? <p>Loading...</p>\n                    : showAll\n                        ? workSessions.data.map(session => (\n                            <WorkSessionItem\n                                key={session.startDate.toISOString()}\n                                session={session}\n                            />\n                        ))\n                        : length > 0\n                            && <WorkSessionItem session={workSessions.data[workSessions.data.length - 1]} />\n                }\n            </div>\n        </div>\n    );\n}\n","import React, { useState } from \"react\";\nimport { editCurrentWorkSession } from \"../api/estimateApi\";\nimport { useProvidedTrello } from \"../hooks/useProvidedTrello\";\nimport { useWorkSessions } from \"../hooks/useWorkSessions\";\n\ntype Props = {\n    className?: string;\n}\n\nexport function EndWorkSessionButton(props: Props) {\n    const t = useProvidedTrello();\n    const sessions = useWorkSessions(t);\n    const [isLoading, setIsLoading] = useState(false);\n\n    if (sessions.data === undefined\n        || sessions.data.length === 0\n        || sessions.data[sessions.data.length - 1].endDate !== undefined\n    )\n        return <p>No work session active. Adding work will automatically create a session.</p>;\n\n    return (\n        <button\n            className={`end-work-session mod-danger ${props.className}`}\n            onClick={async () => {\n                if (isLoading)\n                    return;\n\n                setIsLoading(true);\n                await editCurrentWorkSession(t, async current => ({\n                    ...current,\n                    endDate: new Date(),\n                }));\n                await sessions.refetch();\n                setIsLoading(false);\n            }}\n        >\n            {!isLoading ? \"End session\" : \"...\"}\n        </button>\n    );\n}\n","import React, { useState } from \"react\";\nimport { saveAs } from \"file-saver\";\n\nimport \"./BoardSummaryPage.scss\";\nimport { getBoardEstimates, SummaryEstimate } from \"../api/estimateApi\";\nimport { useInit } from \"../jk/hooks/useInit\";\nimport { formatMinutes } from \"../utils/timeParsing\";\nimport { exportEstimatesToTsv } from \"../utils/export\";\nimport { useProvidedTrello } from \"../hooks/useProvidedTrello\";\nimport { useWorkSessions } from \"../hooks/useWorkSessions\";\nimport { useCurrentWork } from \"../hooks/useCurrentWork\";\nimport { useElapsedMinutes } from \"../hooks/useElapsed\";\nimport { WorkButton } from \"../components/WorkButton\";\nimport { WorkSessions } from \"../components/WorkSessions\";\nimport { EndWorkSessionButton } from \"../components/EndWorkSessionButton\";\nimport { DeployInfo } from \"../components/DeployInfo\";\n\nexport default function BoardSummaryPage() {\n    const t = useProvidedTrello();\n    const [summary, setSummary] = useState<SummaryEstimate>();\n    const [margin, setMargin] = useState(0.2);\n    const workSessions = useWorkSessions(t);\n    const currentWork = useCurrentWork();\n    const elapsedWorkMinutes = useElapsedMinutes(currentWork.value?.startDate);\n\n    const currentSummary: SummaryEstimate = {\n        estimateMinutes: summary?.estimateMinutes ?? 0,\n        workMinutes: elapsedWorkMinutes + (summary?.workMinutes ?? 0),\n        remainingMinutes: - elapsedWorkMinutes + (summary?.remainingMinutes ?? 0),\n    };\n\n    const refresh = async () => {\n        const fetched = await getBoardEstimates(t);\n        setSummary(fetched);\n    };\n\n    useInit(() => {\n        refresh().then(() => {\n            // Refresh the Notes List when Trello signals that a change has happened\n            t.render(async () => {\n                await refresh();\n            });\n        });\n    });\n\n    // TODO: export generico\n\n    return (\n        <div className='summary'>\n            {summary === undefined\n                ? <p> Loading... </p>\n                : <>\n                    <div>\n                        Estimate: {formatMinutes(currentSummary.estimateMinutes)}\n                    </div>\n                    <div>\n                        Work: {formatMinutes(currentSummary.workMinutes)}\n                    </div>\n                    <div>\n                        Remaining: {formatMinutes(currentSummary.remainingMinutes)}\n                    </div>\n                    <WorkButton onEstimateChanged={() => workSessions.refetch()} />\n                    <WorkSessions />\n                    <EndWorkSessionButton />\n                    {/* <button onClick={async () => {\n                        const sessions = await getWorkSessions(t);\n                        sessions.pop();\n                        sessions[sessions.length - 1].endDate = undefined;\n                        await setWorkSessions(t, sessions);\n                    }}>\n                        delete last session\n                    </button> */}\n                    <div className='export-section'>\n                        <div>\n                            Estimate margin multiplier\n                        </div>\n                        <div className='export-inputs'>\n                            <input\n                                value={margin}\n                                onChange={e => {\n                                    const val = parseFloat(e.target.value);\n                                    if (isNaN(val) || val < 0)\n                                        return;\n                                    setMargin(val);\n                                }}\n                                placeholder='insert margin (default is 0.2)...'\n                            />\n                            <button\n                                className='mod-primary'\n                                onClick={async () => {\n                                    const tsv = await exportEstimatesToTsv(t, margin);\n                                    console.log(tsv);\n                                    saveAs(\n                                        new Blob([tsv], { type: \"text/plain;charset=utf-8\" }),\n                                        \"estimate.tsv\",\n                                    );\n                                }}\n                            >\n                                Export estimates\n                            </button>\n                        </div>\n                    </div>\n                    <DeployInfo className=\"deploy-info\" />\n                </>\n            }\n        </div>\n    );\n}\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n"],"names":["ServedFrom","window","location","host","Version","process","DeployInfo","props","className","roundTo2Decimals","number","Math","round","exportEstimatesToTsv","t","marginPercentage","getAllCardsEstimates","estimates","filtered","filter","e","estimateMinutes","rows","estimate","push","card","name","totalEstimateHours","margin","join","queryKey","useWorkSessions","queryClient","useQueryClient","query","useQuery","getWorkSessions","staleTime","useWorkSessionsQuery","useTrelloRenderWithOptions","refresh","setQueryData","undefined","callImmediately","WorkSessionItem","session","isoStartDate","startDate","toISOString","formattedDate","substring","indexOf","currentWork","useCurrentWork","currentWorkMinutes","useElapsedMinutes","endDate","value","totalWorkMinutes","workMinutes","formatMinutes","WorkSessions","workSessions","useProvidedTrello","useState","showAll","setShowAll","length","data","onClick","current","map","EndWorkSessionButton","sessions","isLoading","setIsLoading","editCurrentWorkSession","Date","refetch","BoardSummaryPage","summary","setSummary","setMargin","elapsedWorkMinutes","currentSummary","remainingMinutes","getBoardEstimates","fetched","useInit","then","render","WorkButton","onEstimateChanged","onChange","val","parseFloat","target","isNaN","placeholder","tsv","console","log","saveAs","Blob","type","b","a","autoBom","warn","test","c","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","error","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","f","self","global","navigator","userAgent","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","download","rel","href","origin","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports"],"sourceRoot":""}