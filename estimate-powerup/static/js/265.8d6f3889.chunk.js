"use strict";(self.webpackChunkestimate_powerup=self.webpackChunkestimate_powerup||[]).push([[265],{4305:function(t,n,e){e.d(n,{Eo:function(){return w},TO:function(){return O},Uo:function(){return I},V9:function(){return l},VS:function(){return N},Vc:function(){return y},Wm:function(){return d},X8:function(){return E},bS:function(){return G},f5:function(){return P},kS:function(){return b},oc:function(){return h},qH:function(){return C},s9:function(){return k},tm:function(){return q},w9:function(){return S},y7:function(){return p},zR:function(){return v}});var r=e(2982),u=e(4942),a=e(1413),i=e(7762),s=e(8214),o=e(5861),c=e(8286),f=(0,s.Z)().mark(d);function p(t){var n=0;for(var e in t.workMinutes)n+=t.workMinutes[e];return n}function l(t,n,e){return n?0:(void 0===e&&(e=p(t)),(t.updatedEstimateMinutes||t.estimateMinutes)-e)}function d(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(0,s.Z)().keys(t.workMinutes);case 1:if((e.t1=e.t0()).done){e.next=7;break}return n=e.t1.value,e.next=5,{memberId:n,minutes:t.workMinutes[n]};case 5:e.next=1;break;case 7:case"end":return e.stop()}}),f)}function v(t){return 0!==t.updatedEstimateMinutes?t.updatedEstimateMinutes:t.estimateMinutes}function h(t,n){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,s.Z)().mark((function t(n,e){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=JSON,t.next=3,n.get(null!==e&&void 0!==e?e:"card","shared","estimate","null");case 3:if(t.t1=t.sent,null!==(r=t.t0.parse.call(t.t0,t.t1))){t.next=7;break}return t.abrupt("return",{estimateMinutes:0,updatedEstimateMinutes:0,workMinutes:{}});case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,n,e){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)((0,s.Z)().mark((function t(n,e,r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.set(null!==r&&void 0!==r?r:"card","shared","estimate",JSON.stringify(e));case 2:return t.next=4,R(n);case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,n,e){return x.apply(this,arguments)}function x(){return x=(0,o.Z)((0,s.Z)().mark((function t(n,e,r){var i,c,f;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.member("id");case 2:return c=t.sent,t.next=5,h(n,r);case 5:return f=t.sent,t.next=8,w(n,(0,a.Z)((0,a.Z)({},f),{},{workMinutes:(0,a.Z)((0,a.Z)({},f.workMinutes),{},(0,u.Z)({},c.id,(null!==(i=f.workMinutes[c.id])&&void 0!==i?i:0)+e))}),r);case 8:return t.next=10,q(n,function(){var t=(0,o.Z)((0,s.Z)().mark((function t(n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,a.Z)((0,a.Z)({},n),{},{workMinutes:n.workMinutes+e}));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}());case 10:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function y(t){return M.apply(this,arguments)}function M(){return M=(0,o.Z)((0,s.Z)().mark((function t(n){var e,u,i,o,c=arguments;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=c.length,u=new Array(e>1?e-1:0),i=1;i<e;i++)u[i-1]=c[i];return void 0!==u&&0!==u.length||(u=["id"]),t.next=4,n.cards.apply(n,(0,r.Z)(u));case 4:return o=t.sent,t.next=7,Promise.all(o.map((function(t){return h(n,t.id).then((function(n){return(0,a.Z)((0,a.Z)({},n),{},{card:t})}))})));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((0,s.Z)().mark((function t(n){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(n,"id","dueComplete");case 2:return e=t.sent,t.abrupt("return",_(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){var n,e={estimateMinutes:0,updatedEstimateMinutes:0,workMinutes:0,remainingMinutes:0,deltaMinutes:0},r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){var u=n.value;e.estimateMinutes+=u.estimateMinutes;var a=p(u);e.workMinutes+=a;var s=l(u,u.card.dueComplete);e.remainingMinutes+=s>0?s:0,e.updatedEstimateMinutes+=u.card.dueComplete?a:u.updatedEstimateMinutes||u.estimateMinutes,(u.card.dueComplete||a>u.estimateMinutes)&&(e.deltaMinutes+=u.estimateMinutes-a)}}catch(o){r.e(o)}finally{r.f()}return e}function N(t){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)((0,s.Z)().mark((function t(n){var e,r,u,o,c,f;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.list("id","cards");case 2:e=t.sent,r=[],u=(0,i.Z)(e.cards),t.prev=5,u.s();case 7:if((o=u.n()).done){t.next=15;break}return c=o.value,t.next=11,h(n,c.id);case 11:f=t.sent,r.push((0,a.Z)({card:c},f));case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),u.e(t.t0);case 20:return t.prev=20,u.f(),t.finish(20);case 23:return t.abrupt("return",_(r));case 24:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})))).apply(this,arguments)}function E(t){return J.apply(this,arguments)}function J(){return(J=(0,o.Z)((0,s.Z)().mark((function t(n){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=JSON,t.next=3,n.get("board","private","work","null");case 3:return t.t1=t.sent,null!==(e=t.t0.parse.call(t.t0,t.t1))&&(e.startDate=new Date(e.startDate)),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,n){return z.apply(this,arguments)}function z(){return(z=(0,o.Z)((0,s.Z)().mark((function t(n,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.set("board","private","work",JSON.stringify(null!==e&&void 0!==e?e:null));case 2:c.W.emit();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return W.apply(this,arguments)}function W(){return(W=(0,o.Z)((0,s.Z)().mark((function t(n){var e,r,u,a,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("board","private","work_sessions","[]");case 2:e=t.sent,r=JSON.parse(e),u=(0,i.Z)(r);try{for(u.s();!(a=u.n()).done;)(o=a.value).startDate=new Date(o.startDate),void 0!==o.endDate&&(o.endDate=new Date(o.endDate))}catch(s){u.e(s)}finally{u.f()}return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t,n){return T.apply(this,arguments)}function T(){return(T=(0,o.Z)((0,s.Z)().mark((function t(n,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.set("board","private","work_sessions",JSON.stringify(e));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){t.length>=32&&t.shift();var n={startDate:new Date,workMinutes:0};return t.push(n),n}function q(t,n){return A.apply(this,arguments)}function A(){return(A=(0,o.Z)((0,s.Z)().mark((function t(n,e){var r,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(n);case 2:return r=t.sent,void 0!==(u=r[r.length-1])&&void 0===u.endDate||(u=B(r)),t.next=7,e(u);case 7:return r[r.length-1]=t.sent,t.next=10,C(n,r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t){return H.apply(this,arguments)}function H(){return(H=(0,o.Z)((0,s.Z)().mark((function t(n){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("board","shared","margin",.2);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t,n){return V.apply(this,arguments)}function V(){return(V=(0,o.Z)((0,s.Z)().mark((function t(n,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.set("board","shared","margin",e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t){return K.apply(this,arguments)}function K(){return(K=(0,o.Z)((0,s.Z)().mark((function t(n){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get("board","private","last_input_time",null);case 2:return(e=t.sent)&&(e=new Date(e)),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t,n){return $.apply(this,arguments)}function $(){return($=(0,o.Z)((0,s.Z)().mark((function t(n,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.set("board","private","last_input_time",e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return U.apply(this,arguments)}function U(){return(U=(0,o.Z)((0,s.Z)().mark((function t(n){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:L(n,new Date);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},8286:function(t,n,e){e.d(n,{W:function(){return s}});var r=e(7143);var u,a,i=new(e.n(r)()),s=(u=i,a="work.current.changed",{on:function(t){return u.on(a,t),t},once:function(t){return u.once(a,t),t},off:function(t){return u.off(a,t),t},emit:function(t){return u.emit(a,t)}})},9697:function(t,n,e){e.d(n,{HH:function(){return u},LZ:function(){return c},Zd:function(){return o},ne:function(){return i},oE:function(){return a},qG:function(){return s}});var r=e(5728);function u(t,n){return new Date(t.getTime()+(0,r.y2)(n))}function a(t,n){return(0,r.do)(function(t,n){return n.getTime()-t.getTime()}(t,n))}function i(t){return Date.now()-t.getTime()}function s(t){return i(t)/1e3}function o(t){return i(t)/1e3/60}function c(t,n){return(null===t||void 0===t?void 0:t.getTime())===(null===n||void 0===n?void 0:n.getTime())}},6733:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function evaluateMathExpression(expression){if(!/^[0-9.()+*-/]+$/.test(expression))return NaN;try{return eval(expression)}catch(error){return NaN}}__webpack_require__.d(__webpack_exports__,{K:function(){return evaluateMathExpression}})},5728:function(t,n,e){e.d(n,{JB:function(){return c},MG:function(){return s},do:function(){return d},fg:function(){return l},xZ:function(){return i},y2:function(){return p},yz:function(){return f}});var r=e(885),u=e(7762),a=e(6733),i=8;function s(t,n,e){var s=(0,r.Z)(n,2),o=s[0],c=s[1],f=function(t){if(t=(t=(t=t.replaceAll(" ","")).replaceAll(",",".")).toLowerCase(),!/^([^a-z]+[a-z]+)+$/.test(t))return NaN;var n,e=0,r=(0,u.Z)(t.matchAll(/([^a-z]+)([a-z]+)/g));try{for(r.s();!(n=r.n()).done;){var s=n.value,o=s[2];if(1!==o.length)return NaN;var c=void 0;if("m"===o)c=1;else if("h"===o)c=60;else{if("d"!==o)return NaN;c=60*i}var f=(0,a.K)(s[1]);if(isNaN(f))return NaN;e+=c*f}}catch(p){r.e(p)}finally{r.f()}return e<=0?NaN:e}(o);if(!isNaN(f)){var p=e(f);return c(""),p}t.alert({display:"error",message:"invalid input",duration:4})}var o={zero:"none",negative:"?",hoursPerDay:8};function c(t){return f(t)}function f(t){var n,e,r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(isNaN(t))return"NaN";if(t<0)return null!==(n=u.negative)&&void 0!==n?n:o.negative;if(0===t)return null!==(e=u.zero)&&void 0!==e?e:o.zero;var a=null!==(r=u.hoursPerDay)&&void 0!==r?r:o.hoursPerDay,i=Math.floor(t%60),s=Math.floor(t/60),c=s%a,f=Math.floor(s/a),p=0;t<1&&(p=Math.round(60*t),i=0);var l="";return f>0&&(l+=f+"d"),c>0&&(l+=c+"h"),i>0&&(l+=i+"m"),p>0&&(l+=p+"s"),l}function p(t){return 60*t*1e3}function l(t){return p(60*t)}function d(t){return t/1e3/60}},3265:function(t,n,e){e.d(n,{M:function(){return i},W:function(){return s}});var r=e(4305),u=e(9697),a=e(5728);function i(t){var n,e=null!==(n=t.totalWorkMinutes)&&void 0!==n?n:(0,r.y7)(t.estimate);return null!=t.currentWork&&t.currentWork.cardId===t.cardId&&(e+=(0,u.Zd)(t.currentWork.startDate)),t.estimate.estimateMinutes-e}function s(t){var n=t.delta,e=t.short;return n>=0?e?"S: "+(0,a.JB)(n):"Saved: "+(0,a.JB)(n):e?"O: "+(0,a.JB)(-n):"Overtime: "+(0,a.JB)(-n)}}}]);
//# sourceMappingURL=265.8d6f3889.chunk.js.map